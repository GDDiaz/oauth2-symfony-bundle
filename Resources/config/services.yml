parameters:
    oauth2.model_manager.factory.class: Pantarei\Bundle\Oauth2Bundle\Model\ModelManagerFactory
    oauth2.response_handler.factory.class: Pantarei\Oauth2\ResponseType\ResponseTypeHandlerFactory
    oauth2.grant_handler.factory.class: Pantarei\Oauth2\GrantType\GrantTypeHandlerFactory
    oauth2.token_handler.factory.class: Pantarei\Oauth2\TokenType\TokenTypeHandlerFactory

    security.authentication.provider.token.class: Pantarei\Oauth2\Security\Authentication\Provider\TokenProvider
    security.authentication.listener.token.class: Pantarei\Oauth2\Security\Firewall\TokenListener

    security.authentication.provider.resource.class: Pantarei\Oauth2\Security\Authentication\Provider\ResourceProvider
    security.authentication.listener.resource.class: Pantarei\Oauth2\Security\Firewall\ResourceListener

services:
    oauth2.model_manager.factory:
        class: %oauth2.model_manager.factory.class%
        arguments: ["@doctrine.orm.entity_manager", "%oauth2.model%"]
    oauth2.response_handler.factory:
        class: %oauth2.response_handler.factory.class%
        arguments: ["%oauth2.response_handler%"]
    oauth2.grant_handler.factory:
        class: %oauth2.grant_handler.factory.class%
        arguments: ["%oauth2.grant_handler%"]
    oauth2.token_handler.factory:
        class: %oauth2.token_handler.factory.class%
        arguments: ["%oauth2.token_handler%"]

    security.authentication.provider.token:
        class: %security.authentication.provider.token.class%
        arguments: ["@oauth2.model_manager.factory"]
    security.authentication.listener.token:
        class: %security.authentication.listener.token.class%
        arguments: ["@security.context", "@security.authentication.manager", "@oauth2.model_manager.factory", "@oauth2.token_handler.factory"]

    security.authentication.provider.resource:
        class: %security.authentication.provider.resource.class%
        arguments: ["@oauth2.model_manager.factory"]
    security.authentication.listener.resource:
        class: %security.authentication.listener.resource.class%
        arguments: ["@security.context", "@security.authentication.manager", "@oauth2.model_manager.factory", "@oauth2.token_handler.factory"]
